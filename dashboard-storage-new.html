<!doctype html>
<html lang="pt-PT">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Criar Novo ArmazÃ©m â€” AgriConnect</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
<div class="sidebar">
  <h2>AgriConnect</h2>
  <a href="dashboard.html">ğŸ“Š Dashboard</a>
  <a href="dashboard-storage.html" class="active">ğŸ­ Armazenamento</a>
  <a href="dashboard-products.html">ğŸ“¦ Produtos</a>
  <a href="dashboard-orders.html">ğŸ›’ Pedidos</a>
  <a href="dashboard-transport.html">ğŸšš Transporte</a>
  <a href="dashboard-transformation.html">âš™ï¸ TransformaÃ§Ã£o</a>
  <a href="dashboard-wallet.html">ğŸ’³ Pagamentos</a>
  <a href="auth.html" id="logoutBtn">ğŸšª Sair</a>
</div>

<div class="main">
  <h1>Criar Novo ArmazÃ©m</h1>
  <form id="storageForm" class="card">
    <label>Nome da InstalaÃ§Ã£o: <input type="text" name="facilityName" required /></label><br/>
    <label>LocalizaÃ§Ã£o: <input type="text" name="location" required /></label><br/>
    <label>Capacidade (toneladas): <input type="number" name="capacity" required /></label><br/>
    <label>DescriÃ§Ã£o: <textarea name="description"></textarea></label><br/>
    <button type="submit" class="btn btn-primary">Salvar</button>
  </form>
  <div id="storageMsg" class="muted"></div>
</div>

<script src="js/api-bridge.js"></script>
<script src="js/app.js"></script>
<script>
  document.getElementById('storageForm').addEventListener('submit', async e => {
    e.preventDefault();
    const fd = new FormData(e.target);
    try {
      await fetchJSON('/api/storage', {
        method: 'POST',
        body: JSON.stringify(Object.fromEntries(fd))
      });
      showToast('ArmazÃ©m criado com sucesso!', 'success');
      e.target.reset();
    } catch (err) {
      showToast('Erro ao criar armazÃ©m: ' + err.message, 'error');
    }
  });
</script>
</body>
</html>
