<!doctype html>
<html lang="pt-PT">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Criar Novo Armazém — AgriConnect</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
<div class="sidebar">
  <h2>AgriConnect</h2>
  <a href="dashboard.html">📊 Dashboard</a>
  <a href="dashboard-storage.html" class="active">🏭 Armazenamento</a>
  <a href="dashboard-products.html">📦 Produtos</a>
  <a href="dashboard-orders.html">🛒 Pedidos</a>
  <a href="dashboard-transport.html">🚚 Transporte</a>
  <a href="dashboard-transformation.html">⚙️ Transformação</a>
  <a href="dashboard-wallet.html">💳 Pagamentos</a>
  <a href="auth.html" id="logoutBtn">🚪 Sair</a>
</div>

<div class="main">
  <h1>Criar Novo Armazém</h1>
  <form id="storageForm" class="card">
    <label>Nome da Instalação: <input type="text" name="facilityName" required /></label><br/>
    <label>Localização: <input type="text" name="location" required /></label><br/>
    <label>Capacidade (toneladas): <input type="number" name="capacity" required /></label><br/>
    <label>Descrição: <textarea name="description"></textarea></label><br/>
    <button type="submit" class="btn btn-primary">Salvar</button>
  </form>
  <div id="storageMsg" class="muted"></div>
</div>

<script src="js/api-bridge.js"></script>
<script src="js/app.js"></script>
<script>
  document.getElementById('storageForm').addEventListener('submit', async e => {
    e.preventDefault();
    const fd = new FormData(e.target);
    try {
      await fetchJSON('/api/storage', {
        method: 'POST',
        body: JSON.stringify(Object.fromEntries(fd))
      });
      showToast('Armazém criado com sucesso!', 'success');
      e.target.reset();
    } catch (err) {
      showToast('Erro ao criar armazém: ' + err.message, 'error');
    }
  });
</script>
</body>
</html>
